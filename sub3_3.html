<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title> 원주국토관리청 통합모니터링 시스템 </title>
  <link rel="stylesheet" href="css/common.css">
  <script src="js/jquery.min.js"></script>
  <script src="js/jquery-ui.min.js"></script>
  <script src="js/jquery.magnific-popup.min.js"></script>
  <script src="js/aos.js"></script>
  <script src="js/tabulator.min.js"></script>
  <script src="js/ui.js"></script>
</head>
<body>
  <div id="wrap">
    <div id="header">
      <h1><a href="#"><img src="img/logo_wonjuadmin.png" alt="" /></a></h1>
      <h2 class="hide">주메뉴</h2>
      <ul id="gnb">
        <li><a href="#">통합모니터링</a></li>
        <li>
          <a href="#">수집장치관리</a>
          <ul class="submenu submenu2">
            <li><a href="#">레이더 관리</a></li>
            <li><a href="#">라이다 관리</a></li>
            <li><a href="#">음향식노면검지기 관리</a></li>
          </ul>
        </li>
        <li>
          <a href="#">VMS관리</a>
          <ul class="submenu submenu3">
            <li><a href="#">VMS 제어</a></li>
            <li><a href="#">VMS 시나리오 관리</a></li>
            <li><a href="#">VMS 메시지 관리</a></li>
          </ul>
        </li>
        <li>
          <a href="sub5.html" target="_blank"><span class="ico">VMS 통합관제</span></a>
        </li>
        <li>
          <a href="#"><span class="ico">통계/이력관리</span></a>
        </li>
        <li>
          <a href="#">시스템 관리</a>
          <ul class="submenu submenu5">
            <li><a href="#">계정 관리</a></li>
            <li><a href="#">접속 이력관리</a></li>
          </ul>
        </li>
      </ul>
      <h2 class="hide">유틸메뉴</h2>
      <ul id="util">
        <li>
          <a href="#" class="user">
            <span class="avatar"></span>
            <span class="nickname">Admin 01</span>
          </a>
        </li>
        <li><a href="#" class="logout">로그아웃</a></li>
      </ul>
    </div><!-- #header -->
    <div id="container">
      <div class="tit-wrap">
        <div class="tit-l">
          <h3>VMS 시나리오 관리</h3>
          <div class="navi-area">
            <a class="home" href="#">VMS관리</a>
            <a href="#" class="current">VMS 시나리오 관리</a>
          </div>
        </div>
        <div class="tit-r">
          <div class="btns-wrap">
            <span class="btn-base tp3"><a href="#"><em class="delete">삭제</em></a></span>
            <span class="btn-base"><a href="#"><em class="modify">수정</em></a></span>
            <span class="btn-base btn-popup-anim-1"><a href="#popup-add-scenario"><em class="add">추가</em></a></span>
          </div>
        </div>
      </div><!-- .tit-wrap -->
      <div class="content-wrap">
        <div class="content-l">
          <div id="exampleTable" class="c-table"></div>
        </div><!-- .content-l -->
        <div class="content-r">        
          <div class="scenario-detail" id="scenario-detail-1">
            <h4 class="tit">VMS 시나리오</h4>
            <div class="info-box">
              <ul>
                <li>
                  <span class="label">시나리오 이름</span>
                  <span class="value">-</span>
                </li>
                <li>
                  <span class="label">전환 시간</span>
                  <span class="value">-</span>
                </li>
              </ul>
            </div>
            <div class="scenario-item">
              <a href="#" class="evt-list"><em>목록을 선택하면 표출됩니다</em></a>
            </div>
          </div><!-- .scenario-detail -->

          <div class="scenario-detail" id="scenario-detail-2" style="display: none;">
            <h4 class="tit">VMS 시나리오</h4>
            <div class="info-box">
              <ul>
                <li>
                  <span class="label">시나리오 이름</span>
                  <span class="value">VMS광교교차로-학동AA11</span>
                </li>
                <li>
                  <span class="label">전환 시간</span>
                  <span class="value">180초</span>
                </li>
              </ul>
            </div>
            <div class="scenario-item">
              <ul class="sce-list col4" id="scenario-col-4">
                <li>
                  <div class="canvas-image"><img src="https://placehold.co/600x600/000000/FFFFFF/png" alt="" /></div>
                  <div class="canvas-image"><img src="https://placehold.co/600x600/000000/FFFFFF/png" alt="" /></div>
                </li>
                <li>
                  <div class="canvas-image"></div>
                  <div class="canvas-image"></div>
                </li>
                <li>
                  <div class="canvas-image"></div>
                  <div class="canvas-image"></div>
                </li>
                <li>
                  <div class="canvas-image"></div>
                  <div class="canvas-image"></div>
                </li>
              </ul>
              <ul class="sce-list col3" id="scenario-col-3">
                <li>
                  <div class="canvas-image"><img src="https://placehold.co/600x600/000000/FFFFFF/png" alt="" /></div>
                  <div class="canvas-image"><img src="https://placehold.co/600x600/000000/FFFFFF/png" alt="" /></div>
                </li>
                <li>
                  <div class="canvas-image"></div>
                  <div class="canvas-image"></div>
                </li>
                <li>
                  <div class="canvas-image"></div>
                  <div class="canvas-image"></div>
                </li>
              </ul>
              <ul class="sce-list col2" id="scenario-col-2">
                <li>
                  <div class="canvas-image"><img src="https://placehold.co/600x600/000000/FFFFFF/png" alt="" /></div>
                  <div class="canvas-image"><img src="https://placehold.co/600x600/000000/FFFFFF/png" alt="" /></div>
                </li>
                <li>
                  <div class="canvas-image"></div>
                  <div class="canvas-image"></div>
                </li>
              </ul>
              <ul class="sce-list col1" id="scenario-col-1">
                <li>
                  <div class="canvas-image"><img src="https://placehold.co/600x600/000000/FFFFFF/png" alt="" /></div>
                  <div class="canvas-image"><img src="https://placehold.co/600x600/000000/FFFFFF/png" alt="" /></div>
                </li>
              </ul>
            </div>
          </div><!-- .scenario-detail -->

          <div class="scenario-detail" id="scenario-detail-3" style="display: none;">
            <h4 class="tit">VMS 시나리오</h4>
            <div class="info-box">
              <ul>
                <li>
                  <span class="label">시나리오 이름</span>
                  <span class="value">VMS광교교차로-학동AA11</span>
                </li>
                <li>
                  <span class="label">전환 시간</span>
                  <span class="value">180초</span>
                </li>
              </ul>
            </div>
            <div class="scenario-item">
              <ul class="sce-list col2">
                <li>
                  <div class="canvas-image"><img src="https://placehold.co/600x600/000000/FFFFFF/png" alt="" /></div>
                  <div class="canvas-image"><img src="https://placehold.co/600x600/000000/FFFFFF/png" alt="" /></div>
                </li>
                <li>
                  <div class="canvas-image"></div>
                  <div class="canvas-image"></div>
                </li>
              </ul>
            </div>
          </div><!-- .scenario-detail -->

          <div class="scenario-detail" id="scenario-detail-4" style="display: none;">
            <h4 class="tit">VMS 시나리오</h4>
            <div class="info-box">
              <ul>
                <li>
                  <span class="label">시나리오 이름</span>
                  <span class="value">VMS광교교차로-학동AA11</span>
                </li>
                <li>
                  <span class="label">전환 시간</span>
                  <span class="value">180초</span>
                </li>
              </ul>
            </div>
            <div class="scenario-item">
              <ul class="sce-list col3">
                <li>
                  <div class="canvas-image"><img src="https://placehold.co/600x600/000000/FFFFFF/png" alt="" /></div>
                  <div class="canvas-image"><img src="https://placehold.co/600x600/000000/FFFFFF/png" alt="" /></div>
                </li>
                <li>
                  <div class="canvas-image"></div>
                  <div class="canvas-image"></div>
                </li>
                <li>
                  <div class="canvas-image"></div>
                  <div class="canvas-image"></div>
                </li>
              </ul>
            </div>
          </div><!-- .scenario-detail -->
        </div><!-- .content-r -->
      </div><!-- .content-wrap -->
    </div><!-- #container -->

    <div class="popup-wrap z-anim mfp-hide" id="popup-add-scenario" data-width="1206">
      <h3 class="tit">VMS 시나리오 추가</h3>
      <div class="con-wrap">
        <div class="manage-area">
          <div class="scenario-items">
            <div class="items-input">
              <ul>
                <li>
                  <div class="input-area">
                    <span class="label">시나리오 이름</span>
                    <div class="input">
                      <input type="text" placeholder="시나리오 이름을 입력하세요" class="input-base tp2" />
                    </div>
                  </div>
                </li>
                <li>
                  <div class="input-area">
                    <span class="label">전환 시간</span>
                    <div class="input">
                      <span class="counter-base">
                        <button class="btn-minus">-</button>
                        <input type="text" value="0" />
                        <button class="btn-plus">+</button>
                      </span>
                    </div>
                  </div>
                </li>
              </ul>
            </div>
            <div class="items-status">
              <div class="item">
                <ul>
                  <li><img src="https://placehold.co/600x600/000000/FFFFFF/png?text=1" alt="" /></li>
                  <li></li>
                </ul>
                <a href="#" class="btn-delete"></a>
              </div>
              <div class="item disabled next">
                <ul>
                  <li></li>
                  <li></li>
                </ul>
                <a href="#" class="btn-delete"></a>
                <div class="action-area"></div>
              </div>
              <div class="item disabled">
                <ul>
                  <li></li>
                  <li></li>
                </ul>
                <a href="#" class="btn-delete"></a>
                <div class="action-area"></div>
              </div>
              <div class="item disabled">
                <ul>
                  <li></li>
                  <li></li>
                </ul>
                <a href="#" class="btn-delete"></a>
                <div class="action-area"></div>
              </div>
            </div>
          </div>
          <div class="scenario-material">
            <div class="tab-base">
              <ul>
                <li class="on"><a href="#tab1">텍스트</a></li>
                <li><a href="#tab2">이미지</a></li>
                <li><a href="#tab3">가변 이미지</a></li>
              </ul>
            </div>
            <ul class="panel-base">
              <li id="tab1">
                <div class="msg-list-wrap">
                  <ul class="msg-list">
                    <li>
                      <dl>
                        <dt><img src="https://placehold.co/600x600/000000/FFFFFF/png?text=1" alt="" /></dt>
                        <dd>메시지 이름</dd>
                      </dl>
                    </li>
                    <li>
                      <dl>
                        <dt><img src="https://placehold.co/600x600/000000/FFFFFF/png?text=2" alt="" /></dt>
                        <dd>메시지 이름</dd>
                      </dl>
                    </li>
                    <li>
                      <dl>
                        <dt><img src="https://placehold.co/600x600/000000/FFFFFF/png?text=3" alt="" /></dt>
                        <dd>메시지 이름</dd>
                      </dl>
                    </li>
                    <li>
                      <dl>
                        <dt><img src="https://placehold.co/600x600/000000/FFFFFF/png?text=4" alt="" /></dt>
                        <dd>메시지 이름</dd>
                      </dl>
                    </li>
                    <li>
                      <dl>
                        <dt><img src="https://placehold.co/600x600/000000/FFFFFF/png?text=5" alt="" /></dt>
                        <dd>메시지 이름</dd>
                      </dl>
                    </li>
                    <li>
                      <dl>
                        <dt><img src="https://placehold.co/600x600/000000/FFFFFF/png?text=6" alt="" /></dt>
                        <dd>메시지 이름</dd>
                      </dl>
                    </li>
                    <li>
                      <dl>
                        <dt><img src="https://placehold.co/600x600/000000/FFFFFF/png?text=7" alt="" /></dt>
                        <dd>메시지 이름</dd>
                      </dl>
                    </li>
                    <li>
                      <dl>
                        <dt><img src="https://placehold.co/600x600/000000/FFFFFF/png?text=8" alt="" /></dt>
                        <dd>메시지 이름</dd>
                      </dl>
                    </li>
                    <li>
                      <dl>
                        <dt><img src="https://placehold.co/600x600/000000/FFFFFF/png?text=9" alt="" /></dt>
                        <dd>메시지 이름</dd>
                      </dl>
                    </li>
                    <li>
                      <dl>
                        <dt><img src="https://placehold.co/600x600/000000/FFFFFF/png?text=10" alt="" /></dt>
                        <dd>메시지 이름</dd>
                      </dl>
                    </li>
                  </ul>
                  
                </div>
                <div class="paging-wrap">
                  <a href="#" class="btn-prev"></a>
                  <a href="#">1</a>
                  <a href="#" class="on">2</a>
                  <a href="#">3</a>
                  <a href="#">4</a>
                  <a href="#">5</a>
                  <a href="#">6</a>
                  <a href="#">7</a>
                  <a href="#">8</a>
                  <a href="#">9</a>
                  <a href="#">10</a>
                  <a href="#" class="btn-next"></a>
                </div>
              </li>
              <li id="tab2">2</li>
              <li id="tab3">3</li>
            </ul>
          </div>
        </div><!-- .manage-area -->
        <div class="btns-wrap t-center">
          <span class="btn-base tp3 b-mfp-close"><a href="#"><em class="cancel">취소</em></a></span>
          <span class="btn-base"><a href="#"><em class="save">저장</em></a></span>
        </div>
      </div>
    </div><!-- .popup-wrap -->
    
  </div><!-- #wrap -->
  <script>
    createTable("#exampleTable");

    $(window).on('load resize', function(){
      $('.content-wrap .c-table.tabulator').css('height', $(window).height() - 165);
      $('.content-wrap .scenario-item').css('height', $(window).height() - 275);
    });

    // $(".items-status ul").sortable({
    //   revert: true
    // }).droppable({
    //   accept: ".msg-list li dt",
    //   drop: function(event, ui) {
    //     $(this).append("<li><img src='" + ui.helper.find('img').attr('src') + "' alt='' /></li>");
    //     ui.helper.remove();
    //   }
    // });
    // $(".msg-list li dt").draggable({
    //   helper: "clone",
    //   revert: "invalid"
    // });

    $(".items-status ul").sortable({
      revert: true
    });

    $(".items-status ul li").droppable({
      accept: ".msg-list li dt",
      drop: function(event, ui) {
        if (!$(this).closest('.item').hasClass('disabled') && !$(this).closest('.item').hasClass('next')) {
          $(this).html("<img src='" + ui.helper.find('img').attr('src') + "' alt='' />");
          ui.helper.remove(); // 복제된 요소를 제거
        }
      },
    });

    $(".msg-list li dt").draggable({
      helper: "clone",
      revert: function(event) {
        if ($('.items-status ul li img').length == 2) {
          $('.items-status > .item:eq(0)').addClass('full');
        }
        if ($('.items-status ul li img').length >= 2) {
          $('.items-status > .item:eq(1)').removeClass('disabled');
        }
        if ($('.items-status ul li img').length >= 4) {
          $('.items-status > .item:eq(2)').removeClass('disabled');
        }
        if ($('.items-status ul li img').length >= 6) {
          $('.items-status > .item:eq(3)').removeClass('disabled');
        }
      },
    });
    $('.items-status').on('click', '> .item:not(.disabled) .action-area', function(){
      $(this).closest('.item').removeClass('next');
      if ($(this).closest('.item').next('.item').length) {
        $(this).closest('.item').next('.item').addClass('next');
      }
    });

    var Qscenario = $.urlParam('scenario');
    var Qpopup = $.urlParam('popup');
    var Qcol = $.urlParam('col');

    if (Qscenario || Qpopup || Qcol) {
      setTimeout(function(){
        if (Qscenario) {
          $('[id*=scenario-]').hide();
          if (Qscenario === '1') {
            $('#scenario-detail-1').show();
          } else if (Qscenario === '2') {
            $('#scenario-detail-2').show();
          } else if (Qscenario === '3') {
            $('#scenario-detail-3').show();
          } else if (Qscenario === '4') {
            $('#scenario-detail-4').show();
          }
        }
        if (Qpopup == 'addScenario') {
          setTimeout(function(){
            $('[href="#popup-add-scenario"]').click();
          }, 250);
        }

        if (Qcol === '1') {
          $('#scenario-col-1').css('display', 'flex');
        } else if (Qcol === '2') {
          $('#scenario-col-2').css('display', 'flex');
        } else if (Qcol === '3') {
          $('#scenario-col-3').css('display', 'flex');
        } else {
          $('#scenario-col-4').css('display', 'flex');
        }
      }, 250);
    }
  </script>
</body>
</html>